(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),a=t(6),o=t(3),u=t(1),i=t(0),l=function(e){var n=e.name,t=e.value,c=e.onChange;return Object(i.jsxs)("div",{children:[n,": ",Object(i.jsx)("input",{value:t,onChange:c})]})},d=function(e){var n=e.value,t=e.onChange;return Object(i.jsx)(l,{name:"Filter with",value:n,onChange:t})},s=function(e){var n=e.person,t=e.handleDelete;return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:n.name}),Object(i.jsx)("td",{children:n.number}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:t(n.id,n.name),children:"Remove"})})]})},h=function(e){var n=e.persons,t=e.searchtext,c=e.handleDelete;return Object(i.jsx)("table",{children:Object(i.jsx)("tbody",{children:n.filter((function(e){return e.name.toLowerCase().match(".*".concat(t.toLowerCase(),".*"))})).map((function(e){return Object(i.jsx)(s,{person:e,handleDelete:c},e.name)}))})})},j=function(e){var n=e.handleSubmit,t=e.fields;return Object(i.jsxs)("form",{onSubmit:n,children:[t.map((function(e){return Object(i.jsx)(l,{name:e.name,value:e.value,onChange:e.handleChange},e.name)})),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})},b=t(4),f=t.n(b),m="/api/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},deleteResource:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e){return f.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))}},v=function(e){var n=e.notification;if(null===n)return Object(i.jsx)(i.Fragment,{});var t=void 0!==n.color?n.color:"red",c={color:t,borderWidth:"thick",borderColor:t};return Object(i.jsx)("div",{style:c,children:Object(i.jsx)("h2",{children:n.message})})},p=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),l=Object(o.a)(r,2),s=l[0],b=l[1],f=Object(u.useState)(""),m=Object(o.a)(f,2),p=m[0],x=m[1],g=Object(u.useState)(""),C=Object(o.a)(g,2),w=C[0],k=C[1],S=Object(u.useState)(null),y=Object(o.a)(S,2),D=y[0],A=y[1],R=function(e){A({message:e,color:"green"}),setTimeout((function(){return A(null)}),5e3)},E=function(e){A({message:e,color:"red"}),setTimeout((function(){return A(null)}),5e3)};Object(u.useEffect)((function(){O.getAll().then((function(e){return c(e)}))}),[]);var F=[{name:"name",value:s,handleChange:function(e){return b(e.target.value)}},{name:"number",value:p,handleChange:function(e){return x(e.target.value)}}];return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{notification:D}),Object(i.jsx)(d,{value:w,onChange:function(e){return k(e.target.value)}}),Object(i.jsx)("h3",{children:"Add new"}),Object(i.jsx)(j,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(void 0!==n){if(!window.confirm("".concat(s," is already added to the phonebook, replace the old number with a new one?")))return;var r=Object(a.a)(Object(a.a)({},n),{},{number:p});O.update(r).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),R("".concat(e.name," updated"))})).catch((function(e){E("Could not update ".concat(r.name))}))}if(void 0===n){var o={name:s,number:p};O.create(o).then((function(e){c(t.concat(e)),R("".concat(e.name," added to the phonebook"))})).catch((function(e){E(e.response.data.error)}))}b(""),x("")},fields:F}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(h,{persons:t,searchtext:w,handleDelete:function(e,n){return function(){window.confirm("Remove ".concat(n," from contacts?"))&&O.deleteResource(e).then((function(){c(t.filter((function(n){return n.id!==e}))),R("".concat(n," removed from the phonebook"))}))}}})]})};r.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.70195662.chunk.js.map